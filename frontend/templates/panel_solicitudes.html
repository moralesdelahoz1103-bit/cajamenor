<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Mis Solicitudes - Caja Menor</title>
    <!-- CSS Modular -->
    <link rel="stylesheet" href="../static/css/variables.css">
    <link rel="stylesheet" href="../static/css/reset.css">
    <link rel="stylesheet" href="../static/css/components.css">
    <link rel="stylesheet" href="../static/css/views/panel-solicitudes.css">
</head>
<body>
    <!-- Header Component -->
    <app-header 
        active-page="panel_solicitudes" 
        user-name="Usuario pruebas" 
        user-role="Solicitante"
        user-initials="UP">
    </app-header>

    <!-- Main Container -->
    <div class="container">
        <!-- Page Header -->
        <div class="page-header">
            <h1 class="page-title">Mis Solicitudes</h1>
            <p class="page-subtitle">Gestiona y da seguimiento a tus solicitudes de caja menor</p>
        </div>

        <!-- Stats Cards Component -->
        <app-stats-cards view-type="solicitante"></app-stats-cards>

        <!-- Filters Component -->
        <app-filters-section view-type="solicitante" clear-function="limpiarFiltros"></app-filters-section>

        <!-- Solicitudes List Component -->
        <app-solicitudes-list></app-solicitudes-list>
    </div>

    <!-- FAB Nueva Solicitud -->
    <button class="fab" onclick="abrirModal('modalNuevaSolicitud')" title="Nueva Solicitud">+</button>

    <!-- Modal: Nueva Solicitud -->
    <div class="modal-overlay" id="modalNuevaSolicitud">
        <div class="modal">
            <div class="modal-header">
                <h2 class="modal-title">
                    <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                        <path d="M11 4H4a2 2 0 00-2 2v14a2 2 0 002 2h14a2 2 0 002-2v-7"/>
                        <path d="M18.5 2.5a2.121 2.121 0 013 3L12 15l-4 1 1-4 9.5-9.5z"/>
                    </svg>
                    Nueva Solicitud
                </h2>
                <button class="modal-close" onclick="cerrarModal('modalNuevaSolicitud')">×</button>
            </div>
            <form id="formNuevaSolicitud" onsubmit="guardarSolicitud(event)">
                <div class="modal-body">
                    <div class="form-grid">
                        <div class="form-field full">
                            <label class="form-label">Nombre de la solicitud</label>
                            <input type="text" class="form-input" id="inputNombre" name="nombre" required placeholder="Ej: Impresión de material promocional">
                        </div>
                        <div class="form-field">
                            <label class="form-label">Sede</label>
                            <select class="form-select" id="inputSede" name="sede" required>
                                <option value="">Seleccione una sede</option>
                                <option value="Sede Principal">Sede Principal</option>
                                <option value="Sede Norte">Sede Norte</option>
                                <option value="Sede Sur">Sede Sur</option>
                                <option value="Sede Este">Sede Este</option>
                                <option value="Sede Oeste">Sede Oeste</option>
                            </select>
                        </div>
                        <div class="form-field">
                            <label class="form-label">Monto</label>
                            <input type="number" class="form-input" id="inputMonto" name="monto" required placeholder="0.00" step="0.01">
                        </div>
                        <div class="form-field full">
                            <label class="form-label">Centro de costo</label>
                            <select class="form-select" id="inputCentroCosto" name="centroCosto" required>
                                <option value="">Seleccione un centro de costo</option>
                                <option value="Operaciones">Operaciones</option>
                                <option value="Marketing">Marketing</option>
                                <option value="IT">CIT</option>
                                <option value="Ventas">Ventas</option>
                            </select>
                        </div>
                        <div class="form-field full">
                            <label class="form-label">Concepto (Descripción)</label>
                            <textarea class="form-textarea" id="inputConcepto" name="concepto" required placeholder="Describe el motivo de la solicitud..." rows="3"></textarea>
                        </div>
                        <div class="form-field full">
                            <label class="form-label">Aprobador</label>
                            <select class="form-select" id="inputAprobador" name="aprobador" required>
                                <option value="">Seleccione un aprobador</option>
                                <option value="Enlace Admin">Enlace Admin</option>
                                <option value="Gerente General">Gerente General</option>
                                <option value="Director Financiero">Director Financiero</option>
                                <option value="Coordinador Regional">Coordinador Regional</option>
                            </select>
                        </div>
                    </div>
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-secondary" onclick="cerrarModal('modalNuevaSolicitud')">Cancelar</button>
                    <button type="submit" class="btn btn-primary">Crear Solicitud</button>
                </div>
            </form>
        </div>
    </div>

    <!-- Modal: Detalle Solicitud -->
    <div class="modal-overlay" id="modalDetalleSolicitud">
        <div class="modal">
            <div class="modal-header">
                <h2 class="modal-title" id="modalDetalleTitle">
                    <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                        <path d="M9 5H7a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2"/>
                    </svg>
                    Detalles de la solicitud
                </h2>
                <button class="modal-close" onclick="cerrarModal('modalDetalleSolicitud')">×</button>
            </div>
            <div class="modal-body" id="modalDetalleContenido">
                <!-- Se llena dinámicamente -->
            </div>
        </div>
    </div>

    <!-- JavaScript Modular -->
    <!-- Componentes Web -->
    <script src="../static/js/components/app-header.js"></script>
    <script src="../static/js/components/app-stats-cards.js"></script>
    <script src="../static/js/components/app-filters-section.js"></script>
    <script src="../static/js/components/app-solicitudes-list.js"></script>
    
    <!-- Utilidades -->
    <script src="../static/js/utils/config.js"></script>
    <script src="../static/js/utils/helpers.js"></script>
    <script src="../static/js/utils/storage.js"></script>
    
    <!-- Módulos de componentes -->
    <script src="../static/js/modules/modales.js"></script>
    <script src="../static/js/modules/progress-tracker.js"></script>
    <script src="../static/js/modules/solicitud-card.js"></script>
    
    <!-- Vista específica -->
    <script src="../static/js/views/panel-solicitudes.js"></script>
</body>
</html>
